<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Custom Wordle League</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input { text-transform: uppercase; width: 60px; font-size: 20px; }
    button { font-size: 16px; }
    pre { background: #f0f0f0; padding: 10px; }
  </style>
</head>
<body>
  <h1>Custom Wordle League</h1>
  <p>Guess today's 5-letter word:</p>
  <input id="guess" maxlength="5">
  <button onclick="submitGuess()">Guess</button>
  <pre id="result"></pre>

  <script>
    const wordList = ["apple", "brave", "charm", "delta", "eagle", "fancy", "grape", "hound", "mango"];
    const startDate = new Date('2025-06-01');
    const today = new Date();
    const dayNumber = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
    const targetWord = wordList[dayNumber % wordList.length].toUpperCase();
    const maxGuesses = 6;
    const guesses = [];

    const played = localStorage.getItem('wordlePlayed-' + dayNumber);
    const storedResult = localStorage.getItem('wordleResult-' + dayNumber);

    if (played) {
      document.getElementById('guess').disabled = true;
      document.querySelector('button').disabled = true;
      document.getElementById('result').textContent = '‚úÖ You already played today!\nHere was your result:\n' + storedResult;
    }

    function submitGuess() {
      if (guesses.length >= maxGuesses) return;

      const input = document.getElementById('guess');
      const guess = input.value.toUpperCase();
      if (guess.length !== 5) {
        alert('Enter a 5-letter word.');
        return;
      }

      guesses.push(guess);
      const result = getResult(guess);
      document.getElementById('result').textContent += result + '\n';

      if (guess === targetWord) {
        document.getElementById('result').textContent += '\nüéâ You guessed it in ' + guesses.length + ' tries!';
        endGame();
      } else if (guesses.length >= maxGuesses) {
        document.getElementById('result').textContent += '\n‚ùå Out of tries! The word was: ' + targetWord;
        endGame();
      }

      input.value = '';
    }

    function getResult(guess) {
      const targetArr = targetWord.split('');
      const guessArr = guess.split('');
      const result = Array(5).fill('‚¨ú');

      const letterCounts = {};
      for (const letter of targetArr) {
        letterCounts[letter] = (letterCounts[letter] || 0) + 1;
      }

      // First pass: green
      for (let i = 0; i < 5; i++) {
        if (guessArr[i] === targetArr[i]) {
          result[i] = 'üü©';
          letterCounts[guessArr[i]]--;
          guessArr[i] = null;
          targetArr[i] = null;
        }
      }

      // Second pass: yellow
      for (let i = 0; i < 5; i++) {
        if (guessArr[i] && letterCounts[guessArr[i]] > 0) {
          result[i] = 'üü®';
          letterCounts[guessArr[i]]--;
        }
      }

      return result.join('');
    }

    function endGame() {
      document.getElementById('guess').disabled = true;
      document.querySelector('button').disabled = true;

      localStorage.setItem('wordlePlayed-' + dayNumber, 'true');
      localStorage.setItem('wordleResult-' + dayNumber, document.getElementById('result').textContent);
    }
  </script>
</body>
</html>
